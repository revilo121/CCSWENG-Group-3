<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory</title>
    <link rel="stylesheet" href="/assets/inventory-style.css">
    <link rel="stylesheet" href="/assets/sidebar.css">
    <link rel="stylesheet" href="/assets/topbar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
</head>
<body>
    <%- include('partials/topbar' )%>

    <div class = "main-fb">

        <%- include('partials/sidebar') %>
        
        <div class="main-content">
            <section class="inventory-status">
                <div class="status out-of-stock">
                    <i class="fas fa-exclamation-circle"></i>
                    <div class="status-text">
                        <span class="status-label">Out Of Stock</span>
                        <h2>5</h2>
                    </div>
                </div>
                <div class="status low-stock">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div class="status-text">
                        <span class="status-label">Low Stock</span>
                        <h2>55</h2>
                    </div>
                </div>
                <div class="status in-stock">
                    <i class="fas fa-check-circle"></i>
                    <div class="status-text">
                        <span class="status-label">In Stock</span>
                        <h2>555</h2>
                    </div>
                </div>
            </section>
    
            <section class="inventory-table">
                <div class="inventory-controls">
                    <button class="add-item"><i class="fas fa-plus"></i> Add Item</button>

                    <!-- add item modal -->
                    <div id="addItemModal" class="modal">
                        <div class="modal-content">
                          <span class="close">&times;</span>
                          <h2>Add New Item</h2>
                          <form id="addItemForm" action="/add-item" method="POST">
                            <label for="name">Item Name</label>
                            <input type="text" id="name" name="name" required>
                            
                            <label for="category">Category</label>
                            <input type="text" id="category" name="category" required>
                            
                            <label for="price">Price</label>
                            <input type="number" id="price" name="price" required>
                            
                            <label for="quantityInStock">Quantity In Stock</label>
                            <input type="number" id="quantity" name="quantity" required>
                            
                            <label for="lowStockThreshold">Low Stock Threshold</label>
                            <input type="number" id="lowStockThreshold" name="lowStockThreshold" required>
                            
                            <label for="measurementUnit">Measurement Unit</label>
                            <input type="text" id="measurementUnit" name="measurementUnit" required>

                            <input type="hidden" id="selectedBranch" name="branchStored" value="<%= selectedBranch %>">
                            
                            <button type="submit">Add Item</button>
                        </form>
                            </div>
                        </div>


                        <button class="stock-in">Stock In</button>
                    <button class="stock-out">Stock Out</button>
                    
                    <div class="search-bar">
                        <input type="text" placeholder="Search items...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <div class="sorting-controls">
                        <button class="sort"><i class="fas fa-sort"></i> Sort by</button>
                        <button class="filter"><i class="fas fa-filter"></i> Filter by</button>
                        <button class="pagination-btn prev"><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-btn next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
    
                <div class="inventory-grid">
                    
                    <div class="item-card stock-room">
                        <div class="card-header">
                            <span class="item-label">stock room</span>
                            <span class="item-dot"></span>
                        </div>
                        <span class="item-name">Ajinomoto Betsin</span>
                        <p>Price: Variable</p>
                        <p>Cost: P220.00</p>
                        <p>In Stock: 5</p>
                        <div class="card-menu">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
    
                    <!-- Add more item cards here -->
    
                </div>
            </section>
        </div>
        </div>

    </div>

    

    

<script>
       // Branch dropdown functionality
const branchSelect = document.querySelector('.branch-select');
const branchOptions = document.querySelector('.branch-options');

branchSelect.addEventListener('click', () => {
    branchOptions.classList.toggle('show');
});

// Modal functionality
const modal = document.getElementById("addItemModal");
const btn = document.querySelector(".add-item");
const span = document.getElementsByClassName("close")[0];

// Open the modal when the "Add Item" button is clicked
btn.onclick = function() {
    modal.style.display = "block";
}

// Close the modal when the "x" span is clicked
span.onclick = function() {
    modal.style.display = "none";
}

// Close the modal when clicking outside of it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

// Ensure the form inside the modal submits properly
const addItemForm = document.getElementById("addItemForm");

addItemForm.addEventListener('submit', function(event) {
    // Prevent the form from submitting normally (if you're handling it via JS, otherwise omit this line)
    // event.preventDefault();

    // Add any additional validation here (optional)

    // The form will now submit to the server
});

    </script>
</body>
</html>
